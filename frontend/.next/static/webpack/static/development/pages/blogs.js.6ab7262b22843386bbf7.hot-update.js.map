{"version":3,"file":"static/webpack/static\\development\\pages\\blogs.js.6ab7262b22843386bbf7.hot-update.js","sources":["webpack:///./pages/blogs/index.js"],"sourcesContent":["import Head from \"next/head\";\r\nimport Link from \"next/link\";\r\nimport Layout from \"../../components/Layout\";\r\nimport { useState } from \"react\";\r\nimport { listBlogWithCategoriesAndTags } from \"../../actions/blog\";\r\nimport Card from \"../../components/blog/Card\";\r\nimport { API, DOMAIN, APP_NAME, FB_APP_ID } from \"../../config\";\r\nimport Category from \"../../components/crud/Category\";\r\nimport { getTags } from \"../../actions/tag\";\r\nimport renderHTML from \"react-render-html\";\r\nimport moment from \"moment\";\r\nimport { withRouter } from \"next/router\";\r\n\r\nconst Blogs = ({ blogs, categories, tags, totlaBlogs, blogsLimit, blogSkip, router }) => {\r\n  const head = () => (\r\n    <Head>\r\n      <title>Programming blogs | {APP_NAME}</title>\r\n      <meta\r\n        name=\"description\"\r\n        content=\"Programming blogs and tutorials on react node next.js and web developoment\"\r\n      />\r\n      <link rel=\"canonical\" href={`${DOMAIN}${router.pathname}`} />\r\n      <meta property=\"og:title\" content={`Latest web developoment tutorials | ${APP_NAME}`} />\r\n      <meta\r\n        property=\"og:description\"\r\n        content=\"Programming blogs and tutorials on react node next vue php laravel and web developoment\"\r\n      />\r\n      <meta property=\"og:type\" content=\"webiste\" />\r\n      <meta property=\"og:url\" content={`${DOMAIN}${router.pathname}`} />\r\n      <meta property=\"og:site_name\" content={`${APP_NAME}`} />\r\n\r\n      <meta property=\"og:image\" content={`${DOMAIN}/images/blog.jpg`} />\r\n      <meta property=\"og:image:secure_url\" ccontent={`${DOMAIN}/images/blog.jpg`} />\r\n      <meta property=\"og:image:type\" content=\"image/jpg\" />\r\n      <meta property=\"fb:app_id\" content={`${FB_APP_ID}`} />\r\n    </Head>\r\n  );\r\n\r\n  const [limit, setLimit] = useState(blogsLimit);\r\n  const [skip, setSkip] = useState(0);\r\n  const [size, setSize] = useState(totlaBlogs);\r\n  const [loadedBlogs, setLoadedBlogs] = useState([]);\r\n\r\n  const loadMore = () => {\r\n    let toSkip = skip + limit;\r\n    listBlogWithCategoriesAndTags(toSkip, limit).then(data => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setLoadedBlogs([...loadedBlogs, ...data.blogs]);\r\n        setSize(data.size);\r\n        setSkip(toSkip);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMoreButton = () => {\r\n    return (\r\n      size > 0 &&\r\n      size >= limit && (\r\n        <button onClick={loadMore} className=\"btn btn-outline-primary btn-lg\">\r\n          Load More\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n\r\n  const showAllBlogs = () => {\r\n    return blogs.map((blog, index) => {\r\n      return (\r\n        <article key={index}>\r\n          <Card blog={blog} />\r\n        </article>\r\n      );\r\n    });\r\n  };\r\n\r\n  const showAllCategories = () => {\r\n    return categories.map((c, i) => {\r\n      return (\r\n        <Link href={`/categories/${c.slug}`} key={i}>\r\n          <a className=\"btn btn-info mr-1 ml-1 mt-3\">{c.name}</a>\r\n        </Link>\r\n      );\r\n    });\r\n  };\r\n\r\n  const showAllTags = () => {\r\n    return tags.map((t, i) => {\r\n      return (\r\n        <Link href={`/tags/${t.slug}`} key={i}>\r\n          <a className=\"btn btn-outline-primary mr-1 ml-1 mt-3\">{t.name}</a>\r\n        </Link>\r\n      );\r\n    });\r\n  };\r\n\r\n  const showLoadedBlogs = () => {\r\n    return loadedBlogs.map((blog, i) => {\r\n      return (\r\n        <article key={i}>\r\n          <Card blog={blog} />\r\n        </article>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {head()}\r\n      <Layout>\r\n        <main>\r\n          <div className=\"container-fluid\">\r\n            <header>\r\n              <div className=\"col-md-12 pt-3\">\r\n                <h1 className=\"display-4 font-weight-bold text-center\">\r\n                  {\" \"}\r\n                  Programming blogs and tutor\r\n                </h1>\r\n                <section>\r\n                  <div className=\"pb-5 text-center\">\r\n                    {showAllCategories()}\r\n                    <br />\r\n                    {showAllTags()}\r\n                  </div>\r\n                </section>\r\n              </div>\r\n              <div className=\"container-fluid\">{showAllBlogs()}</div>\r\n              <div className=\"container-fluid\">{showLoadedBlogs()}</div>\r\n              <div className=\"text-center pt-5 pb-5 \"> {loadMoreButton()}</div>\r\n            </header>\r\n          </div>\r\n        </main>\r\n      </Layout>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\n//server-side rendering method from next.js    getinitialprops - can be used only on pages Not in components\r\nBlogs.getInitialProps = () => {\r\n  let skip = 0;\r\n  let limit = 2;\r\n  return listBlogWithCategoriesAndTags(limit, skip).then(data => {\r\n    if (data.error) {\r\n      console.log(data.error);\r\n    } else {\r\n      console.log(data);\r\n      return {\r\n        blogs: data.blogs,\r\n        categories: data.categories,\r\n        tags: data.tags,\r\n        totlaBlogs: data.size,\r\n        blogsLimit: limit,\r\n        blogSkip: skip\r\n      };\r\n      // once these are returned, these can be used as props.\r\n    }\r\n  });\r\n};\r\nexport default withRouter(Blogs);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApBA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AACA;AACA;AAAA;;;;A","sourceRoot":""}